import{r,ai as p,V as v,ah as a,I as s,J as g,a0 as t,S as b,_ as V,ac as T}from"./CGnq_Kza.js";import{_ as P,V as _,q as B,s as F,t as N,y as R,z as S,x as y,B as j,a2 as c,$ as E,a0 as I,v as w,Z as O}from"./B4Kh-yHs.js";import"./CjwIl2eS.js";const $={class:"text-h4 font-weight-bold primary--text"},q={__name:"forgot-password",setup(A){const k=B(),f=r(""),d=r(!1),u=r(!1),i=r(!1),n=r(""),m=r(!1),x=[o=>!!o||"Email is required",o=>/.+@.+\..+/.test(o)||"Email must be valid"],C=async()=>{if(m.value){d.value=!0,i.value=!1,u.value=!1;try{const e=await fetch("undefined/api/auth/forgot-password",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:f.value})}),l=await e.json();e.ok?(u.value=!0,n.value=l.message||"Password reset link has been sent to your email",setTimeout(()=>{k.push("/login")},3e3)):(i.value=!0,n.value=l.message||"Failed to send reset link")}catch{i.value=!0,n.value="Network error occurred. Please try again."}finally{d.value=!1}}};return(o,e)=>(v(),p(_,{class:"fill-height",fluid:""},{default:a(()=>[s(F,{align:"center",justify:"center"},{default:a(()=>[s(N,{cols:"12",sm:"8",md:"6",lg:"4"},{default:a(()=>[s(R,{class:"elevation-12"},{default:a(()=>[s(S,{class:"text-center py-6"},{default:a(()=>[g("h2",$,[s(y,{class:"mr-2",color:"primary"},{default:a(()=>[...e[4]||(e[4]=[t("mdi-lock-reset",-1)])]),_:1}),e[5]||(e[5]=t(" Forgot Password ",-1))])]),_:1}),s(j,null,{default:a(()=>[u.value?(v(),p(c,{key:0,type:"success",class:"mb-4",closable:"","onClick:close":e[0]||(e[0]=l=>u.value=!1)},{default:a(()=>[t(V(n.value),1)]),_:1})):b("",!0),i.value?(v(),p(c,{key:1,type:"error",class:"mb-4",closable:"","onClick:close":e[1]||(e[1]=l=>i.value=!1)},{default:a(()=>[t(V(n.value),1)]),_:1})):b("",!0),s(E,{onSubmit:T(C,["prevent"]),modelValue:m.value,"onUpdate:modelValue":e[3]||(e[3]=l=>m.value=l)},{default:a(()=>[e[9]||(e[9]=g("p",{class:"text-body-1 mb-4 text-center"}," Enter your email address and we'll send you a link to reset your password. ",-1)),s(c,{type:"info",class:"mb-4",border:"start",color:"primary",icon:"mdi-information"},{default:a(()=>[...e[6]||(e[6]=[t(" If you reset your password, all sessions will be logged out for your account. ",-1)])]),_:1}),s(I,{modelValue:f.value,"onUpdate:modelValue":e[2]||(e[2]=l=>f.value=l),label:"Email Address",type:"email","prepend-inner-icon":"mdi-email",variant:"outlined",class:"mb-3",rules:x,required:"",disabled:d.value},null,8,["modelValue","disabled"]),s(w,{type:"submit",color:"primary",block:"",size:"large",class:"mb-3",loading:d.value,disabled:!m.value||d.value},{default:a(()=>[s(y,{start:""},{default:a(()=>[...e[7]||(e[7]=[t("mdi-send",-1)])]),_:1}),e[8]||(e[8]=t(" Send Reset Link ",-1))]),_:1},8,["loading","disabled"])]),_:1},8,["modelValue"])]),_:1}),s(O,{class:"justify-center pb-6"},{default:a(()=>[s(w,{to:"/login",variant:"text",color:"primary"},{default:a(()=>[s(y,{start:""},{default:a(()=>[...e[10]||(e[10]=[t("mdi-arrow-left",-1)])]),_:1}),e[11]||(e[11]=t(" Back to Login ",-1))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))}},U=P(q,[["__scopeId","data-v-7c8b2918"]]);export{U as default};
