import{_ as b,P as k,x as d,l as P}from"./B4Kh-yHs.js";import{Q as m,V as p,J as s,S as w,I as r,ah as u,af as C,_ as f,a0 as l,L as U,ac as g,$ as h,ad as y,ap as E}from"./CGnq_Kza.js";import"./CjwIl2eS.js";const D={name:"AccountPersonalView",setup(){return{authStore:P()}},data(){return{message:null,messageTimeout:null,showPasswordResetPopup:!1,showEditProfilePopup:!1,showDeleteAccountPopup:!1,showEditUsernamePopup:!1,showEditEmailPopup:!1,showPasswordResetConfirm:!1,isResettingPassword:!1,editForm:{username:"",email:""},editUsernameForm:{username:""},editEmailForm:{email:""},acknowledgements:{username:!1,email:!1},deleteConfirmation:"",isSaving:!1,isSavingUsername:!1,isSavingEmail:!1,isDeleting:!1}},computed:{user(){return this.authStore.user||{userId:"",username:"",email:"",email:null,emailVerified:!0,lastUsernameChangeAt:null,lastEmailChangeAt:null,emailVerificationExpires:null,createdAt:null}},memberSince(){if(!this.user.createdAt)return"Unknown";const i=new Date(this.user.createdAt);return Number.isNaN(i.getTime())?"Unknown":i.toLocaleDateString(void 0,{year:"numeric",month:"long"})},requiresUsernameAcknowledgement(){const i=this.user.username||"",e=this.editUsernameForm.username?.trim()||"";return e&&e!==i},emailMatchesInput(){return this.user.email?this.editEmailForm.email?.trim().toLowerCase()===this.user.email.toLowerCase():!1},requiresEmailAcknowledgement(){const i=this.user.email?.toLowerCase()||"",e=this.editEmailForm.email?.trim().toLowerCase()||"";return!(!e||e===i||this.emailMatchesInput)},canSaveProfile(){const i=this.editForm.username?.trim()||"",e=this.user.username||"",c=this.editForm.email?.trim().toLowerCase()||"",a=this.user.email?.toLowerCase()||"",n=i&&i!==e,t=c&&c!==a,v=this.emailMatchesInput;return!(!n&&!t&&!v||n&&this.requiresUsernameAcknowledgement&&!this.acknowledgements.username||t&&this.requiresEmailAcknowledgement&&!this.acknowledgements.email||n&&!i||t&&!c)},canSaveUsername(){const i=this.editUsernameForm.username?.trim()||"",e=this.user.username||"";return!(!(i&&i!==e)||this.requiresUsernameAcknowledgement&&!this.acknowledgements.username)},canSaveEmail(){const i=this.editEmailForm.email?.trim().toLowerCase()||"",e=this.user.email?.toLowerCase()||"";return!(!i||i===e||this.emailMatchesInput||this.requiresEmailAcknowledgement&&!this.acknowledgements.email)},usernameLockDeadline(){if(!this.user.lastUsernameChangeAt)return null;const i=new Date(this.user.lastUsernameChangeAt);return Number.isNaN(i.getTime())?null:(i.setTime(i.getTime()+336*60*60*1e3),i>new Date?i:null)},emailLockDeadline(){if(!this.user.lastEmailChangeAt)return null;const i=new Date(this.user.lastEmailChangeAt);return Number.isNaN(i.getTime())?null:(i.setTime(i.getTime()+2160*60*60*1e3),i>new Date?i:null)},emailVerificationDeadline(){if(!this.user.emailVerificationExpires)return null;const i=new Date(this.user.emailVerificationExpires);return Number.isNaN(i.getTime())?null:i},usernameCooldownText(){const i=this.usernameLockDeadline;if(!i)return"";const e=this.formatDateTime(i);return e?`on ${e}`:""},emailCooldownText(){const i=this.emailLockDeadline;if(!i)return"";const e=this.formatDateTime(i);return e?`on ${e}`:""},emailVerificationDeadlineText(){const i=this.emailVerificationDeadline;if(!i)return"";const e=this.formatDateTime(i);return e?`by ${e}`:""}},async mounted(){await this.loadUserData()},beforeUnmount(){this.messageTimeout&&clearTimeout(this.messageTimeout)},methods:{formatDateTime(i){if(!i)return"";const e=new Date(i);return Number.isNaN(e.getTime())?"":e.toLocaleString(void 0,{weekday:"short",month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit"})},setUserFromResponse(i){if(!i){this.authStore.clearAuth();return}this.authStore.setUserFromApi(i)},async loadUserData(){try{await this.authStore.fetchUser()||this.authStore.clearAuth()}catch{}},openEditProfile(){this.editForm.username=this.user.username,this.editForm.email=this.user.email||this.user.email,this.resetAcknowledgements(),this.showEditProfilePopup=!0},closeEditProfile(){this.showEditProfilePopup=!1,this.resetEditForm()},async saveProfile(){if(this.canSaveProfile){this.isSaving=!0;try{const e={username:this.editForm.username.trim(),email:this.editForm.email.trim()},c=await fetch("undefined/api/users/profile",{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(e)}),a=await c.json().catch(()=>({}));if(c.ok){a.user&&this.setUserFromResponse(a.user),this.closeEditProfile();const n=a.message||"Profile updated successfully!";this.showMessage(n,a.requiresEmailVerification?"info":"success")}else{let n=a.error||a.message||"Failed to update profile";if(a.error==="USERNAME_COOLDOWN"||a.error==="EMAIL_COOLDOWN")a.availableAt?n=`You are on cooldown. Next update available on ${this.formatDateTime(a.availableAt)}.`:n="You are on cooldown. Please wait until the cooldown period ends.";else if(a.availableAt){const t=this.formatDateTime(a.availableAt);t&&(n=`${n} Next update available on ${t}.`)}this.showMessage(n,"error")}}catch{this.showMessage("Network error. Please try again.","error")}finally{this.isSaving=!1}}},resetEditForm(){this.editForm.username="",this.editForm.email="",this.resetAcknowledgements()},resetAcknowledgements(){this.acknowledgements.username=!1,this.acknowledgements.email=!1},openEditUsername(){this.editUsernameForm.username=this.user.username,this.acknowledgements.username=!1,this.showEditUsernamePopup=!0},closeEditUsername(){this.showEditUsernamePopup=!1,this.editUsernameForm.username="",this.acknowledgements.username=!1},async saveUsername(){if(this.canSaveUsername){this.isSavingUsername=!0;try{const e={username:this.editUsernameForm.username.trim()},c=await fetch("undefined/api/users/profile",{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(e)}),a=await c.json().catch(()=>({}));if(c.ok)a.user&&this.setUserFromResponse(a.user),this.closeEditUsername(),this.showMessage(a.message||"Username updated successfully!","success");else{let n=a.error||a.message||"Failed to update username";if(a.availableAt){const t=this.formatDateTime(a.availableAt);t&&(n=`${n} Next update available on ${t}.`)}this.showMessage(n,"error")}}catch{this.showMessage("Network error. Please try again.","error")}finally{this.isSavingUsername=!1}}},openEditEmail(){this.editEmailForm.email=this.user.email||this.user.email,this.acknowledgements.email=!1,this.showEditEmailPopup=!0},closeEditEmail(){this.showEditEmailPopup=!1,this.editEmailForm.email="",this.acknowledgements.email=!1},async saveEmail(){if(this.canSaveEmail){this.isSavingEmail=!0;try{const e={email:this.editEmailForm.email.trim()},c=await fetch("undefined/api/users/profile",{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(e)}),a=await c.json().catch(()=>({}));if(c.ok)a.user&&this.setUserFromResponse(a.user),this.closeEditEmail(),this.showMessage(a.message||"Email updated successfully!",a.requiresEmailVerification?"info":"success");else{let n=a.error||a.message||"Failed to update email";if(a.availableAt){const t=this.formatDateTime(a.availableAt);t&&(n=`${n} Next update available on ${t}.`)}this.showMessage(n,"error")}}catch{this.showMessage("Network error. Please try again.","error")}finally{this.isSavingEmail=!1}}},openDeleteAccount(){this.deleteConfirmation="",this.showDeleteAccountPopup=!0},closeDeleteAccount(){this.showDeleteAccountPopup=!1,this.deleteConfirmation=""},async confirmDeleteAccount(){if(this.deleteConfirmation==="DELETE"){this.isDeleting=!0;try{const e=await fetch("undefined/api/users/account",{method:"DELETE",headers:{"Content-Type":"application/json"},credentials:"include"});if(e.ok)await this.authStore.logout(),this.$router.push("/login"),this.showMessage("Account deleted successfully","success");else{const c=await e.json();this.showMessage(c.error||"Failed to delete account","error")}}catch{this.showMessage("Network error. Please try again.","error")}finally{this.isDeleting=!1}}},async changePassword(){this.showPasswordResetConfirm=!0},closePasswordResetPopup(){this.showPasswordResetPopup=!1},closePasswordResetConfirm(){this.showPasswordResetConfirm=!1},async confirmPasswordReset(){this.showPasswordResetConfirm=!1,this.isResettingPassword=!0;try{(await fetch("undefined/api/auth/forgot-password",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:this.user.email})})).ok?this.showPasswordResetPopup=!0:this.showMessage("Failed to send password reset email. Please try again.","error")}catch{this.showMessage("Network error. Please try again.","error")}finally{this.isResettingPassword=!1}},showMessage(i,e="info"){this.message={text:i,type:e},this.messageTimeout&&clearTimeout(this.messageTimeout),this.messageTimeout=setTimeout(()=>{this.message=null},5e3)}}},T={class:"account-view"},A={class:"container"},S={class:"tab-navigation"},R={class:"tab-content profile-section"},x={class:"profile-card"},F={class:"profile-header"},N={class:"profile-avatar"},V={class:"text-h4 text-white"},M={class:"profile-info"},L={class:"profile-title"},O={key:0,class:"status-chip warning"},z={key:1,class:"status-chip success"},I={class:"user-id"},q={class:"profile-details"},j={class:"info-grid"},Y={class:"info-item"},W={class:"info-value"},J={class:"info-item"},B={class:"info-value"},G={key:0,class:"status-chip success subtle"},Q={key:1,class:"status-chip warning subtle"},H={key:0,class:"info-item"},K={class:"info-value pending"},X={class:"info-item"},Z={class:"info-value"},_={key:0,class:"pending-email-banner"},$={key:0},ee={class:"cooldown-list"},se={key:0},te={key:1},ie={class:"profile-actions"},oe={class:"actions-grid"},ne={class:"popup-header"},le={class:"popup-content"},ae={class:"popup-icon"},re={class:"email-address"},ue={class:"popup-actions"},de={class:"popup-header"},me={class:"popup-content"},pe={class:"popup-icon"},fe={class:"popup-actions"},ce={class:"popup-header"},we={class:"popup-content epic-edit-container"},ge={class:"epic-section"},he={class:"section-header"},ve={class:"section-icon"},ye={class:"epic-body"},Ee={class:"epic-field"},be={class:"input-shell"},ke={class:"epic-guidelines"},Pe={key:0,class:"epic-checkbox"},Ce={class:"popup-actions inline-actions"},Ue=["disabled"],De={class:"popup-header"},Te={class:"popup-content epic-edit-container"},Ae={class:"epic-section"},Se={class:"section-header"},Re={class:"section-icon accent"},xe={class:"epic-body"},Fe={class:"epic-field"},Ne={class:"input-shell"},Ve={key:0,class:"pending-note"},Me={key:0},Le={class:"epic-guidelines"},Oe={key:1,class:"epic-checkbox"},ze={class:"popup-actions inline-actions"},Ie=["disabled"],qe={class:"popup-header"},je={class:"popup-content"},Ye={class:"popup-icon"},We={class:"confirmation-input"},Je={class:"popup-actions"},Be=["disabled"];function Ge(i,e,c,a,n,t){const v=C("router-link");return p(),m("div",T,[s("div",A,[e[59]||(e[59]=s("div",{class:"header"},[s("h2",null,"Personal Information"),s("p",null,"Manage your profile and personal settings")],-1)),s("div",S,[r(v,{to:"/account/personal",class:"tab-button active"},{default:u(()=>[r(d,{class:"tab-icon"},{default:u(()=>[...e[33]||(e[33]=[l("mdi-account",-1)])]),_:1}),e[34]||(e[34]=l(" Personal ",-1))]),_:1}),r(v,{to:"/account/security",class:"tab-button"},{default:u(()=>[r(d,{class:"tab-icon"},{default:u(()=>[...e[35]||(e[35]=[l("mdi-shield-lock",-1)])]),_:1}),e[36]||(e[36]=l(" Security ",-1))]),_:1})]),s("div",R,[s("div",x,[s("div",F,[s("div",N,[r(k,{size:"80",color:"primary"},{default:u(()=>[s("span",V,f(t.user.username?.[0]?.toUpperCase()),1)]),_:1})]),s("div",M,[s("div",L,[s("h3",null,f(t.user.username),1),t.user.email?(p(),m("span",O,[r(d,{size:"16"},{default:u(()=>[...e[37]||(e[37]=[l("mdi-clock-outline",-1)])]),_:1}),e[38]||(e[38]=l(" Verification pending ",-1))])):(p(),m("span",z,[r(d,{size:"16"},{default:u(()=>[...e[39]||(e[39]=[l("mdi-check-circle",-1)])]),_:1}),e[40]||(e[40]=l(" All set ",-1))]))]),s("p",I,"User ID: "+f(t.user.userId),1)])]),s("div",q,[e[53]||(e[53]=s("h4",null,"Account Information",-1)),s("div",j,[s("div",Y,[e[42]||(e[42]=s("label",null,"Username",-1)),s("div",W,[l(f(t.user.username)+" ",1),s("button",{class:"edit-inline-btn",onClick:e[0]||(e[0]=(...o)=>t.openEditUsername&&t.openEditUsername(...o)),title:"Edit Username"},[r(d,{size:"16"},{default:u(()=>[...e[41]||(e[41]=[l("mdi-pencil",-1)])]),_:1})])])]),s("div",J,[e[44]||(e[44]=s("label",null,"Email Address",-1)),s("div",B,[l(f(t.user.email)+" ",1),t.user.email?(p(),m("span",Q,"Current")):(p(),m("span",G,"Verified")),s("button",{class:"edit-inline-btn",onClick:e[1]||(e[1]=(...o)=>t.openEditEmail&&t.openEditEmail(...o)),title:"Edit Email"},[r(d,{size:"16"},{default:u(()=>[...e[43]||(e[43]=[l("mdi-pencil",-1)])]),_:1})])])]),t.user.email?(p(),m("div",H,[e[46]||(e[46]=s("label",null,"Pending Email",-1)),s("div",K,[l(f(t.user.email)+" ",1),e[45]||(e[45]=s("span",{class:"status-chip warning subtle"},"Verification required",-1))])])):w("",!0),s("div",X,[e[47]||(e[47]=s("label",null,"Member Since",-1)),s("div",Z,f(t.memberSince),1)])]),t.user.email?(p(),m("div",_,[r(d,{size:"18"},{default:u(()=>[...e[48]||(e[48]=[l("mdi-email-clock",-1)])]),_:1}),s("span",null,[e[49]||(e[49]=l(" We've sent a confirmation email to ",-1)),s("strong",null,f(t.user.email),1),e[50]||(e[50]=l(". ",-1)),t.emailVerificationDeadlineText?(p(),m("span",$," Please verify by "+f(t.emailVerificationDeadlineText)+". ",1)):w("",!0)])])):w("",!0),s("ul",ee,[t.usernameCooldownText?(p(),m("li",se,[r(d,{size:"18"},{default:u(()=>[...e[51]||(e[51]=[l("mdi-calendar-clock",-1)])]),_:1}),s("span",null,"Your next username change will be available "+f(t.usernameCooldownText),1)])):w("",!0),t.emailCooldownText?(p(),m("li",te,[r(d,{size:"18"},{default:u(()=>[...e[52]||(e[52]=[l("mdi-email-sync-outline",-1)])]),_:1}),s("span",null,"Your next email change will be available "+f(t.emailCooldownText),1)])):w("",!0)])]),s("div",ie,[e[58]||(e[58]=s("h4",null,"Profile Actions",-1)),s("div",oe,[s("button",{class:"action-button secondary",onClick:e[2]||(e[2]=(...o)=>t.changePassword&&t.changePassword(...o))},[r(d,null,{default:u(()=>[...e[54]||(e[54]=[l("mdi-lock-reset",-1)])]),_:1}),e[55]||(e[55]=l(" Change Password ",-1))]),s("button",{class:"action-button danger",onClick:e[3]||(e[3]=(...o)=>t.openDeleteAccount&&t.openDeleteAccount(...o))},[r(d,null,{default:u(()=>[...e[56]||(e[56]=[l("mdi-account-remove",-1)])]),_:1}),e[57]||(e[57]=l(" Delete Account ",-1))])])])])])]),n.message?(p(),m("div",{key:0,class:U(["message",n.message.type])},f(n.message.text),3)):w("",!0),n.showPasswordResetPopup?(p(),m("div",{key:1,class:"popup-overlay",onClick:e[7]||(e[7]=(...o)=>t.closePasswordResetPopup&&t.closePasswordResetPopup(...o))},[s("div",{class:"popup-modal",onClick:e[6]||(e[6]=g(()=>{},["stop"]))},[s("div",ne,[e[61]||(e[61]=s("h3",null,"Password Reset Email Sent",-1)),s("button",{class:"close-button",onClick:e[4]||(e[4]=(...o)=>t.closePasswordResetPopup&&t.closePasswordResetPopup(...o))},[r(d,null,{default:u(()=>[...e[60]||(e[60]=[l("mdi-close",-1)])]),_:1})])]),s("div",le,[s("div",ae,[r(d,{size:"48",color:"success"},{default:u(()=>[...e[62]||(e[62]=[l("mdi-email-check",-1)])]),_:1})]),e[63]||(e[63]=s("p",{class:"popup-message"},"We've sent a password reset link to your email address:",-1)),s("p",re,f(t.user.email),1),e[64]||(e[64]=s("p",{class:"popup-instruction"}," Please check your inbox and follow the instructions to reset your password. If you don't see the email, check your spam folder. ",-1))]),s("div",ue,[s("button",{class:"popup-button primary",onClick:e[5]||(e[5]=(...o)=>t.closePasswordResetPopup&&t.closePasswordResetPopup(...o))},"Got it")])])])):w("",!0),n.showPasswordResetConfirm?(p(),m("div",{key:2,class:"popup-overlay",onClick:e[12]||(e[12]=(...o)=>t.closePasswordResetConfirm&&t.closePasswordResetConfirm(...o))},[s("div",{class:"popup-modal",onClick:e[11]||(e[11]=g(()=>{},["stop"]))},[s("div",de,[e[66]||(e[66]=s("h3",null,"Confirm Password Reset",-1)),s("button",{class:"close-button",onClick:e[8]||(e[8]=(...o)=>t.closePasswordResetConfirm&&t.closePasswordResetConfirm(...o))},[r(d,null,{default:u(()=>[...e[65]||(e[65]=[l("mdi-close",-1)])]),_:1})])]),s("div",me,[s("div",pe,[r(d,{size:"48",color:"info"},{default:u(()=>[...e[67]||(e[67]=[l("mdi-information",-1)])]),_:1})]),e[68]||(e[68]=s("p",{class:"popup-message"}," If you reset your password, all sessions will be logged out for your account. ",-1)),e[69]||(e[69]=s("p",{class:"popup-instruction"},"Do you want to continue?",-1))]),s("div",fe,[s("button",{class:"popup-button secondary",onClick:e[9]||(e[9]=(...o)=>t.closePasswordResetConfirm&&t.closePasswordResetConfirm(...o))},"Cancel"),s("button",{class:"popup-button primary",onClick:e[10]||(e[10]=(...o)=>t.confirmPasswordReset&&t.confirmPasswordReset(...o))},"Continue")])])])):w("",!0),n.showEditUsernamePopup?(p(),m("div",{key:3,class:"popup-overlay",onClick:e[19]||(e[19]=(...o)=>t.closeEditUsername&&t.closeEditUsername(...o))},[s("div",{class:"popup-modal",onClick:e[18]||(e[18]=g(()=>{},["stop"]))},[s("div",ce,[e[71]||(e[71]=s("h3",null,"Edit Username",-1)),s("button",{class:"close-button",onClick:e[13]||(e[13]=(...o)=>t.closeEditUsername&&t.closeEditUsername(...o))},[r(d,null,{default:u(()=>[...e[70]||(e[70]=[l("mdi-close",-1)])]),_:1})])]),s("div",we,[s("form",{onSubmit:e[17]||(e[17]=g((...o)=>t.saveUsername&&t.saveUsername(...o),["prevent"])),class:"profile-form epic-form"},[s("section",ge,[s("div",he,[s("div",ve,[r(d,null,{default:u(()=>[...e[72]||(e[72]=[l("mdi-account-edit",-1)])]),_:1})]),e[73]||(e[73]=s("div",null,[s("h4",null,"Update your display name"),s("p",null," Choose a display name that represents you. Once confirmed, you'll need to wait two weeks to change it again. ")],-1))]),s("div",ye,[s("div",Ee,[e[75]||(e[75]=s("label",{class:"field-label",for:"editUsername"},"New display name",-1)),s("div",be,[r(d,{class:"field-icon",size:"20"},{default:u(()=>[...e[74]||(e[74]=[l("mdi-account-outline",-1)])]),_:1}),h(s("input",{id:"editUsername","onUpdate:modelValue":e[14]||(e[14]=o=>n.editUsernameForm.username=o),type:"text",class:"form-input",placeholder:"Enter new display name",required:""},null,512),[[y,n.editUsernameForm.username]])]),e[76]||(e[76]=s("p",{class:"field-helper"}," Never use personal information such as your real name, address, or phone number. ",-1))]),s("ul",ke,[s("li",null,[r(d,{size:"16"},{default:u(()=>[...e[77]||(e[77]=[l("mdi-form-textbox",-1)])]),_:1}),e[78]||(e[78]=l("Display names must be at least 3 characters long. ",-1))]),s("li",null,[r(d,{size:"16"},{default:u(()=>[...e[79]||(e[79]=[l("mdi-timer-lock-outline",-1)])]),_:1}),e[80]||(e[80]=l("You won't be able to change your display name again for two weeks. ",-1))])]),t.requiresUsernameAcknowledgement?(p(),m("label",Pe,[h(s("input",{type:"checkbox","onUpdate:modelValue":e[15]||(e[15]=o=>n.acknowledgements.username=o)},null,512),[[E,n.acknowledgements.username]]),e[81]||(e[81]=s("span",null,"I understand I can't change my display name again for 2 weeks after this change.",-1))])):w("",!0)])]),s("div",Ce,[s("button",{type:"button",class:"popup-button secondary",onClick:e[16]||(e[16]=(...o)=>t.closeEditUsername&&t.closeEditUsername(...o))}," Cancel "),s("button",{type:"submit",class:"popup-button primary",disabled:n.isSavingUsername||!t.canSaveUsername},f(n.isSavingUsername?"Saving...":"Save Changes"),9,Ue)])],32)])])])):w("",!0),n.showEditEmailPopup?(p(),m("div",{key:4,class:"popup-overlay",onClick:e[26]||(e[26]=(...o)=>t.closeEditEmail&&t.closeEditEmail(...o))},[s("div",{class:"popup-modal",onClick:e[25]||(e[25]=g(()=>{},["stop"]))},[s("div",De,[e[83]||(e[83]=s("h3",null,"Edit Email",-1)),s("button",{class:"close-button",onClick:e[20]||(e[20]=(...o)=>t.closeEditEmail&&t.closeEditEmail(...o))},[r(d,null,{default:u(()=>[...e[82]||(e[82]=[l("mdi-close",-1)])]),_:1})])]),s("div",Te,[s("form",{onSubmit:e[24]||(e[24]=g((...o)=>t.saveEmail&&t.saveEmail(...o),["prevent"])),class:"profile-form epic-form"},[s("section",Ae,[s("div",Se,[s("div",Re,[r(d,null,{default:u(()=>[...e[84]||(e[84]=[l("mdi-email-edit-outline",-1)])]),_:1})]),e[85]||(e[85]=s("div",null,[s("h4",null,"Update your email"),s("p",null," We'll send a verification link to your new address. You won't be able to update it again for 90 days after verification. ")],-1))]),s("div",xe,[s("div",Fe,[e[87]||(e[87]=s("label",{class:"field-label",for:"editEmail"},"New email address",-1)),s("div",Ne,[r(d,{class:"field-icon",size:"20"},{default:u(()=>[...e[86]||(e[86]=[l("mdi-email-outline",-1)])]),_:1}),h(s("input",{id:"editEmail","onUpdate:modelValue":e[21]||(e[21]=o=>n.editEmailForm.email=o),type:"email",class:"form-input",placeholder:"name@example.com",required:""},null,512),[[y,n.editEmailForm.email]])]),e[88]||(e[88]=s("p",{class:"field-helper"}," We'll send a verification message to confirm this change before it's applied. ",-1))]),t.user.email?(p(),m("div",Ve,[r(d,{size:"18"},{default:u(()=>[...e[89]||(e[89]=[l("mdi-email-clock-outline",-1)])]),_:1}),s("span",null,[e[90]||(e[90]=l(" A verification email is waiting at ",-1)),s("strong",null,f(t.user.email),1),e[91]||(e[91]=l(". ",-1)),t.emailVerificationDeadlineText?(p(),m("span",Me,"Please verify by "+f(t.emailVerificationDeadlineText)+".",1)):w("",!0)])])):w("",!0),s("ul",Le,[s("li",null,[r(d,{size:"16"},{default:u(()=>[...e[92]||(e[92]=[l("mdi-shield-check",-1)])]),_:1}),e[93]||(e[93]=l("You'll need to verify the new email before it replaces your current one. ",-1))]),s("li",null,[r(d,{size:"16"},{default:u(()=>[...e[94]||(e[94]=[l("mdi-timer-sand",-1)])]),_:1}),e[95]||(e[95]=l("After verification, you can't change your email again for 90 days. ",-1))])]),t.requiresEmailAcknowledgement?(p(),m("label",Oe,[h(s("input",{type:"checkbox","onUpdate:modelValue":e[22]||(e[22]=o=>n.acknowledgements.email=o)},null,512),[[E,n.acknowledgements.email]]),e[96]||(e[96]=s("span",null,"I understand my email can't be changed again for 90 days after verification.",-1))])):w("",!0)])]),s("div",ze,[s("button",{type:"button",class:"popup-button secondary",onClick:e[23]||(e[23]=(...o)=>t.closeEditEmail&&t.closeEditEmail(...o))}," Cancel "),s("button",{type:"submit",class:"popup-button primary",disabled:n.isSavingEmail||!t.canSaveEmail},f(n.isSavingEmail?"Saving...":"Save Changes"),9,Ie)])],32)])])])):w("",!0),n.showDeleteAccountPopup?(p(),m("div",{key:5,class:"popup-overlay",onClick:e[32]||(e[32]=(...o)=>t.closeDeleteAccount&&t.closeDeleteAccount(...o))},[s("div",{class:"popup-modal",onClick:e[31]||(e[31]=g(()=>{},["stop"]))},[s("div",qe,[e[98]||(e[98]=s("h3",null,"Delete Account",-1)),s("button",{class:"close-button",onClick:e[27]||(e[27]=(...o)=>t.closeDeleteAccount&&t.closeDeleteAccount(...o))},[r(d,null,{default:u(()=>[...e[97]||(e[97]=[l("mdi-close",-1)])]),_:1})])]),s("div",je,[s("div",Ye,[r(d,{size:"48",color:"error"},{default:u(()=>[...e[99]||(e[99]=[l("mdi-alert-circle",-1)])]),_:1})]),e[101]||(e[101]=s("p",{class:"popup-message danger"},"This action cannot be undone!",-1)),e[102]||(e[102]=s("p",{class:"popup-instruction"},"Deleting your account will permanently remove:",-1)),e[103]||(e[103]=s("ul",{class:"delete-list"},[s("li",null,"Your profile and personal information"),s("li",null,"All your team memberships"),s("li",null,"Your task submissions and history"),s("li",null,"All active sessions")],-1)),s("div",We,[e[100]||(e[100]=s("label",{for:"deleteConfirm"},'Type "DELETE" to confirm:',-1)),h(s("input",{id:"deleteConfirm","onUpdate:modelValue":e[28]||(e[28]=o=>n.deleteConfirmation=o),type:"text",class:"form-input",placeholder:"DELETE"},null,512),[[y,n.deleteConfirmation]])])]),s("div",Je,[s("button",{class:"popup-button secondary",onClick:e[29]||(e[29]=(...o)=>t.closeDeleteAccount&&t.closeDeleteAccount(...o))},"Cancel"),s("button",{class:"popup-button danger",onClick:e[30]||(e[30]=(...o)=>t.confirmDeleteAccount&&t.confirmDeleteAccount(...o)),disabled:n.deleteConfirmation!=="DELETE"||n.isDeleting},f(n.isDeleting?"Deleting...":"Delete Account"),9,Be)])])])):w("",!0)])}const Xe=b(D,[["render",Ge],["__scopeId","data-v-488e6869"]]);export{Xe as default};
